<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Controller Methods | WP MVC</title>

   <link rel="stylesheet" href="/wp-mvc/css/syntax.css" type="text/css" />
   <link rel="stylesheet" href="/wp-mvc/css/default.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/wp-mvc/css/documentation.css" type="text/css" media="screen, projection" />
</head>
<body>

  <a href="https://github.com/tombenner/wp-mvc"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

  <div id="container">
  
    <div id="nav">
      
      <div id="header">
        <a href="/wp-mvc/" id="logo">WP MVC</a>
      </div>

      <ul class="doc-nav" id="sections"><li class="in-active-tree"><a href="/wp-mvc/documentation/installation">Installation</a><ul><li><a href="/wp-mvc/documentation/installation/installing_example_plugins.html">Installing Example Plugins</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/tutorial">Tutorial</a><ul><li><a href="/wp-mvc/documentation/tutorial/create_the_plugin.html">Create the Plugin</a></li><li><a href="/wp-mvc/documentation/tutorial/create_the_database_table.html">Create the Database Table</a></li><li><a href="/wp-mvc/documentation/tutorial/create_the_models_views_and_controllers.html">Create the Models Views and Controllers</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/creating_plugins">Creating Plugins</a><ul><li><a href="/wp-mvc/documentation/creating_plugins/generating_code.html">Generating Code</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/creating_database_tables.html">Creating Database Tables</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/models">Models</a><ul><li><a href="/wp-mvc/documentation/models/saving_data">Saving Data</a><ul><li><a href="/wp-mvc/documentation/models/saving_data/create.html">create</a></li><li><a href="/wp-mvc/documentation/models/saving_data/save.html">save</a></li><li><a href="/wp-mvc/documentation/models/saving_data/update.html">update</a></li><li><a href="/wp-mvc/documentation/models/saving_data/update_all.html">update_all</a></li><li><a href="/wp-mvc/documentation/models/saving_data/insert.html">insert</a></li></ul></li><li><a href="/wp-mvc/documentation/models/retrieving_data">Retrieving Data</a><ul><li><a href="/wp-mvc/documentation/models/retrieving_data/find.html">find</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/find_one.html">find_one</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/find_by_id.html">find_by_id</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/find_by__.html">find_by_*</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/find_one_by__.html">find_one_by_*</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/paginate.html">paginate</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/count.html">count</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/max.html">max</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/min.html">min</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/sum.html">sum</a></li><li><a href="/wp-mvc/documentation/models/retrieving_data/average.html">average</a></li></ul></li><li><a href="/wp-mvc/documentation/models/deleting_data">Deleting Data</a><ul><li><a href="/wp-mvc/documentation/models/deleting_data/delete.html">delete</a></li><li><a href="/wp-mvc/documentation/models/deleting_data/delete_all.html">delete_all</a></li></ul></li><li><a href="/wp-mvc/documentation/models/validations.html">Validations</a></li><li><a href="/wp-mvc/documentation/models/associations">Associations</a><ul><li><a href="/wp-mvc/documentation/models/associations/belongs_to.html">Belongs To</a></li><li><a href="/wp-mvc/documentation/models/associations/has_many.html">Has Many</a></li><li><a href="/wp-mvc/documentation/models/associations/has_and_belongs_to_many.html">Has and Belongs To Many</a></li><li><a href="/wp-mvc/documentation/models/associations/dependent_associations.html">Dependent Associations</a></li></ul></li><li><a href="/wp-mvc/documentation/models/model_attributes">Model Attributes</a><ul><li><a href="/wp-mvc/documentation/models/model_attributes/table.html">table</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/database.html">database</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/includes.html">includes</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/order.html">order</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/display_field.html">display_field</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/primary_key.html">primary_key</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/selects.html">selects</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/per_page.html">per_page</a></li><li><a href="/wp-mvc/documentation/models/model_attributes/hide_menu.html">hide_menu</a></li></ul></li><li><a href="/wp-mvc/documentation/models/model_methods">Model Methods</a><ul><li><a href="/wp-mvc/documentation/models/model_methods/after_find.html">after_find</a></li><li><a href="/wp-mvc/documentation/models/model_methods/after_save.html">after_save</a></li><li><a href="/wp-mvc/documentation/models/model_methods/to_url.html">to_url</a></li></ul></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers">Controllers</a><ul class="in-active-tree"><li class="active in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods">Controller Methods</a><ul class="in-active-tree"><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/set.html">set</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/set_object.html">set_object</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/set_objects.html">set_objects</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/set_pagination.html">set_pagination</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/load_helper.html">load_helper</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/load_model.html">load_model</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/load_models.html">load_models</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/redirect.html">redirect</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/flash.html">flash</a></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_methods/create_or_save.html">create_or_save</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/controllers/controller_attributes">Controller Attributes</a><ul><li><a href="/wp-mvc/documentation/controllers/controller_attributes/before.html">before</a></li><li><a href="/wp-mvc/documentation/controllers/controller_attributes/after.html">after</a></li><li><a href="/wp-mvc/documentation/controllers/controller_attributes/default_searchable_fields.html">default_searchable_fields</a></li><li><a href="/wp-mvc/documentation/controllers/controller_attributes/default_search_joins.html">default_search_joins</a></li><li><a href="/wp-mvc/documentation/controllers/controller_attributes/default_columns.html">default_columns</a></li></ul></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/views">Views</a><ul><li><a href="/wp-mvc/documentation/views/layouts">Layouts</a><ul><li><a href="/wp-mvc/documentation/views/layouts/specifying_a_layout.html">Specifying a Layout</a></li></ul></li><li><a href="/wp-mvc/documentation/views/views_within_views.html">Views Within Views</a></li><li><a href="/wp-mvc/documentation/views/using_helpers.html">Using Helpers</a></li><li><a href="/wp-mvc/documentation/views/view_methods">View Methods</a><ul><li><a href="/wp-mvc/documentation/views/view_methods/pagination.html">pagination</a></li><li><a href="/wp-mvc/documentation/views/view_methods/render_view.html">render_view</a></li></ul></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/helpers">Helpers</a><ul><li><a href="/wp-mvc/documentation/helpers/creating_helpers.html">Creating Helpers</a></li><li><a href="/wp-mvc/documentation/helpers/core_helpers">Core Helpers</a><ul><li><a href="/wp-mvc/documentation/helpers/core_helpers/html.html">HTML</a></li><li><a href="/wp-mvc/documentation/helpers/core_helpers/form.html">Form</a></li><li><a href="/wp-mvc/documentation/helpers/core_helpers/form_tags.html">Form Tags</a></li></ul></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/functions">Functions</a><ul><li><a href="/wp-mvc/documentation/functions/is_mvc_page.html">is_mvc_page</a></li><li><a href="/wp-mvc/documentation/functions/mvc_model.html">mvc_model</a></li><li><a href="/wp-mvc/documentation/functions/mvc_public_url.html">mvc_public_url</a></li><li><a href="/wp-mvc/documentation/functions/mvc_admin_url.html">mvc_admin_url</a></li><li><a href="/wp-mvc/documentation/functions/mvc_css_url.html">mvc_css_url</a></li><li><a href="/wp-mvc/documentation/functions/mvc_js_url.html">mvc_js_url</a></li><li><a href="/wp-mvc/documentation/functions/mvc_render_to_string.html">mvc_render_to_string</a></li><li><a href="/wp-mvc/documentation/functions/mvc_get_plugins.html">mvc_get_plugins</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/routing">Routing</a><ul><li><a href="/wp-mvc/documentation/routing/pretty_urls.html">Pretty URLs</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/utilities">Utilities</a><ul><li><a href="/wp-mvc/documentation/utilities/inflector">Inflector</a><ul><li><a href="/wp-mvc/documentation/utilities/inflector/inflector_methods.html">Inflector Methods</a></li><li><a href="/wp-mvc/documentation/utilities/inflector/adding_rules_to_inflector.html">Adding Rules To Inflector</a></li></ul></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/configuration">Configuration</a><ul><li><a href="/wp-mvc/documentation/configuration/debug.html">Debug</a></li><li><a href="/wp-mvc/documentation/configuration/adminpages.html">AdminPages</a></li></ul></li><li class="in-active-tree"><a href="/wp-mvc/documentation/wordpress_data_integration">Wordpress Data Integration</a><ul><li><a href="/wp-mvc/documentation/wordpress_data_integration/models_for_wordpress_tables.html">Models For Wordpress Tables</a></li><li><a href="/wp-mvc/documentation/wordpress_data_integration/synchronizing_models_with_posts">Synchronizing Models With Posts</a><ul><li><a href="/wp-mvc/documentation/wordpress_data_integration/synchronizing_models_with_posts/no_associated_custom_post_type.html">No Associated Custom Post Type</a></li><li><a href="/wp-mvc/documentation/wordpress_data_integration/synchronizing_models_with_posts/default_custom_post_type.html">Default Custom Post Type</a></li><li><a href="/wp-mvc/documentation/wordpress_data_integration/synchronizing_models_with_posts/customized_custom_post_type.html">Customized Custom Post Type</a></li></ul></li><li><a href="/wp-mvc/documentation/wordpress_data_integration/quick_settings_pages.html">Quick Settings Pages</a></li></ul></li></ul>
      
      <div class="extra">
        <a href="/wp-mvc/download.html">Download</a>
      </div>
      
      <div class="extra">
        <a href="/wp-mvc/contact.html">Contact</a>
      </div>
      
      <div class="extra">
        <a href="https://github.com/tombenner/wp-mvc">Source</a>
      </div>
      
      <div class="extra extra-small">
        Powered by <a href="https://github.com/tombenner/jdoc">JDoc</a>
      </div>
      
    </div>

    <div id="content">
    
      <div class="documentation-content">
  <h2>Controller Methods</h2>
  <div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/set.html">View alone</a><h3>set</h3></div>


<p>Use <code>set()</code> to make variables from the controller available in the view.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$object</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">model</span><span class="o">-&gt;</span><span class="na">find_by_id</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">&#39;includes&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;Event&#39;</span><span class="p">)</span>
    <span class="p">));</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">,</span> <span class="nv">$object</span><span class="p">);</span>
  <span class="p">}</span>
  
<span class="p">}</span>

<span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// views/venues/show.php</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/set_object.html">View alone</a><h3>set_object</h3></div>


<p>In an action where an <code>id</code> URL parameter is available (e.g. the conventional <code>show</code> action, where the <code>id</code> parameter is passed from the URL), calling <code>$this-&gt;set_object()</code> will find the object that has the specified id from the controller's native model and make it available to the view as <code>$object</code> (using the equivalent of <code>$this-&gt;set('object', $object)</code>).</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_object</span><span class="p">();</span>
  <span class="p">}</span>
  
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span>
<span class="c1">// views/venues/show.php</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/set_objects.html">View alone</a><h3>set_objects</h3></div>


<p>In an action that will show a collection of objects (e.g. the conventional <code>index</code> action), calling <code>$this-&gt;set_objects()</code> will find a paginated collection of the objects from the controller's native model and make it available to the view as <code>$objects</code> (using the equivalent of <code>$this-&gt;set('objects', $objects)</code>).</p>

<p><code>set_objects()</code> will handle pagination behind the scenes.  If a URL param named <code>page</code> (or in an admin action a URL named <code>page_num</code>) is set, <code>set_objects()</code> will use that to properly paginate the collection.  It also calls <code>$this-&gt;set_pagination($collection);</code>, which will allow for <a class="documentation-link" href="/wp-mvc/documentation/views/view_methods/pagination.html">pagination links to be displayed in the view</a>.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_objects</span><span class="p">();</span>
  <span class="p">}</span>
  
<span class="p">}</span>

<span class="c1">// views/venues/index.php</span>
<span class="c1">// This will print_r() all of the retrieve objects</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$objects</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/set_pagination.html">View alone</a><h3>set_pagination</h3></div>


<p>To allow for <a class="documentation-link" href="/wp-mvc/documentation/views/view_methods/pagination.html">pagination links to easily be created in a view</a>, call <code>$this-&gt;set_pagination($collection);</code> using a collection that is returned from a <code>paginate()</code> call on a model.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>

<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">PublicController</span> <span class="p">{</span>

  <span class="k">public</span> <span class="k">function</span> <span class="nf">search</span><span class="p">()</span> <span class="p">{</span> 
    <span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Venue</span><span class="o">-&gt;</span><span class="na">paginate</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;objects&#39;</span><span class="p">,</span> <span class="nv">$collection</span><span class="p">[</span><span class="s1">&#39;objects&#39;</span><span class="p">]);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_pagination</span><span class="p">(</span><span class="nv">$collection</span><span class="p">);</span>
  <span class="p">}</span>
  
<span class="p">}</span>

<span class="c1">// views/venues/search.php</span>

<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pagination</span><span class="p">();</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<p><code>set_pagination()</code> processes the collection and sets <code>$this-&gt;pagination</code> to an appropriate array that will be used in <a href="http://codex.wordpress.org/Function_Reference/paginate_links"><code>paginate_links()</code></a> within <code>$this-&gt;pagination();</code> in the view.<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/load_helper.html">View alone</a><h3>load_helper</h3></div>To use a helper in a view, you'll need to call <code>$this-&gt;load_helper()</code> in the controller.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">load_helper</span><span class="p">(</span><span class="s1">&#39;VenueDisplay&#39;</span><span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_object</span><span class="p">();</span>
  <span class="p">}</span>
  
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span>
<span class="c1">// views/venues/show.php</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="x">&lt;h2&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$object</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x">&lt;/h2&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">venue_display</span><span class="o">-&gt;</span><span class="na">formatted_address</span><span class="p">(</span><span class="nv">$object</span><span class="p">);</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span>
<span class="c1">// helpers/venue_display_helper.php</span>
<span class="k">class</span> <span class="nc">VenueDisplayHelper</span> <span class="k">extends</span> <span class="nx">MvcHelper</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">formatted_address</span><span class="p">(</span><span class="nv">$object</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$html</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="nv">$html</span> <span class="o">.=</span> <span class="s1">&#39;&lt;div&gt;&#39;</span><span class="o">.</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="na">address1</span><span class="o">.</span><span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="nv">$html</span> <span class="o">.=</span> <span class="s1">&#39;&lt;div&gt;&#39;</span><span class="o">.</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="na">address2</span><span class="o">.</span><span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="nv">$html</span> <span class="o">.=</span> <span class="s1">&#39;&lt;div&gt;&#39;</span><span class="o">.</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="na">city</span><span class="o">.</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="na">state</span><span class="o">.</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="nv">$object</span><span class="o">-&gt;</span><span class="na">zip</span><span class="o">.</span><span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$html</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/load_model.html">View alone</a><h3>load_model</h3></div>


<p>Use <code>load_model()</code> if you want to use a model other than the controller's native model.  To load multiple models, use <a class="documentation-link" href="/wp-mvc/documentation/controllers/controller_methods/load_models.html">load_models()</a>.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">load_model</span><span class="p">(</span><span class="s1">&#39;Speaker&#39;</span><span class="p">);</span>
    <span class="nv">$speakers</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Speaker</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
  <span class="p">}</span>
  
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/load_models.html">View alone</a><h3>load_models</h3></div>


<p>Use <code>load_models()</code> if you want to use models other than the controller's native model.  To load a single model, use <a class="documentation-link" href="/wp-mvc/documentation/controllers/controller_methods/load_model.html">load_model()</a>.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="c1">// controllers/venues_controller.php</span>
<span class="k">class</span> <span class="nc">VenuesController</span> <span class="k">extends</span> <span class="nx">MvcPublicController</span> <span class="p">{</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">load_models</span><span class="p">(</span><span class="s1">&#39;Speaker&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">);</span>
    <span class="nv">$speakers</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Speaker</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
    <span class="nv">$events</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Event</span><span class="o">-&gt;</span><span class="na">find</span><span class="p">();</span>
  <span class="p">}</span>
  
<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/redirect.html">View alone</a><h3>redirect</h3></div>


<p>To redirect to another page while inside of a controller, use <code>redirect()</code>.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nx">MvcRouter</span><span class="o">::</span><span class="na">admin_url</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;controller&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;venues&#39;</span><span class="p">,</span> <span class="s1">&#39;action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;index&#39;</span><span class="p">));</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="nv">$url</span><span class="p">);</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/flash.html">View alone</a><h3>flash</h3></div>


<p>Use <code>flash()</code> to set a message or warning that will be displayed to the user.  The text will be displayed by <code>display_flash()</code>, which is called in the default admin layout (<code>views/admin/layouts/admin.php</code>), but can be called elsewhere if desired.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="c1">// controllers/admin/admin_venues_controller.php</span>

<span class="k">class</span> <span class="nc">AdminVenuesController</span> <span class="k">extends</span> <span class="nx">AdminMvcController</span> <span class="p">{</span>

  <span class="k">public</span> <span class="k">function</span> <span class="nf">edit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Venue&#39;</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$object</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;Venue&#39;</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Venue</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">params</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">(</span><span class="s1">&#39;notice&#39;</span><span class="p">,</span> <span class="s1">&#39;Successfully saved!&#39;</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">refresh</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">flash</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">Venue</span><span class="o">-&gt;</span><span class="na">validation_error_html</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_object</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span>
<span class="c1">// views/admin/layouts/admin.php</span>
<span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;div class=&quot;wrap&quot;&gt;</span>

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">display_flash</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render_main_view</span><span class="p">();</span> <span class="cp">?&gt;</span><span class="x"></span>

<span class="x">&lt;/div&gt;</span>
</code></pre>
</div>


<div class="doc-child-header"><a class="doc-child-link" href="/wp-mvc/documentation/controllers/controller_methods/create_or_save.html">View alone</a><h3>create_or_save</h3></div>


<p>The <code>add</code> and <code>edit</code> actions in WP MVC's default admin controllers use <code>create_or_save()</code> to either create or update records using data submitted from a form.  <code>create_or_save()</code> checks <code>$this-&gt;params['data']</code> to see if data related to the controller's model is present.  If it is and an ID value is set, the record with that ID is updated; if it is and an ID is not set, a record is inserted with the submitted data.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">AdminVenuesController</span> <span class="k">extends</span> <span class="nx">MvcAdminController</span> <span class="p">{</span>

  <span class="k">public</span> <span class="k">function</span> <span class="nf">add</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">create_or_save</span><span class="p">();</span>
  <span class="p">}</span>
  
  <span class="k">public</span> <span class="k">function</span> <span class="nf">edit</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">verify_id_param</span><span class="p">();</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">create_or_save</span><span class="p">();</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">set_object</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">}</span>

<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


</div>

    </div>

  </div>

</body>
</html>
